(function(t){function e(e){for(var o,n,s=e[0],c=e[1],l=e[2],d=0,v=[];d<s.length;d++)n=s[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&v.push(i[n][0]),i[n]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(v.length)v.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],o=!0,n=1;n<a.length;n++){var c=a[n];0!==i[c]&&(o=!1)}o&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var o={},i={app:0},r=[];function n(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-2d216214":"02f52b64","chunk-45d4c016":"02245c71"}[t]+".js"}function s(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(t){var e=[],a=i[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,o){a=i[t]=[e,o]}));e.push(a[2]=o);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=n(t);var l=new Error;r=function(e){c.onerror=c.onload=null,clearTimeout(d);var a=i[t];if(0!==a){if(a){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,a[1](l)}i[t]=void 0}};var d=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(a,o,function(e){return t[e]}.bind(null,o));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"02d6":function(t,e,a){"use strict";a("b260")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"app"}},[t.logueado?a("v-navigation-drawer",{attrs:{clipped:t.$vuetify.breakpoint.lgAndUp,app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[t.esAdministrador||t.esAlmacenero||t.esVendedor||t.esComprador?[a("v-list-item",{attrs:{to:{name:"home"}}},[a("v-list-item-action",[a("v-icon",[t._v("home")])],1),a("v-list-item-title",[t._v(" Inicio ")])],1)]:t._e(),t.esAdministrador||t.esAlmacenero?[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[t._v(" Almacén ")])],1)],1),a("v-list-item",{attrs:{to:{name:"categoria"}}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-warehouse")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Categorías ")])],1)],1),a("v-list-item",{attrs:{to:{name:"articulo"}}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-barcode-scan")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Artículos ")])],1)],1)],1)]:t._e(),t.esAdministrador||t.esAlmacenero?[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[t._v(" Compras ")])],1)],1),a("v-list-item",{attrs:{to:{name:"ingreso"}}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-currency-usd-off")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Ingresos ")])],1)],1),a("v-list-item",{attrs:{to:{name:"proveedor"}}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-home-account")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Proveedores ")])],1)],1)],1)]:t._e(),t.esAdministrador||t.esVendedor?[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[t._v(" Ventas ")])],1)],1),a("v-list-item",{attrs:{to:{name:"venta"}}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-currency-usd")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Ventas ")])],1)],1),a("v-list-item",{attrs:{to:{name:"cliente"}}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-table-account")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Clientes ")])],1)],1)],1)]:t._e(),t.esAdministrador?[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[t._v(" Accesos ")])],1)],1),a("v-list-item",{attrs:{to:{name:"usuario"}}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-account")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Usuarios ")])],1)],1)],1)]:t._e(),t.esAdministrador||t.esAlmacenero||t.esVendedor?[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[t._v(" Consultas ")])],1)],1),a("v-list-item",{attrs:{to:{name:""}}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-finance")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Consulta Compras ")])],1)],1),a("v-list-item",{attrs:{to:{name:"grafico_v"}}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-poll")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(" Consulta Ventas ")])],1)],1)],1)]:t._e(),t.esAdministrador||t.esComprador?[a("v-list-group",[a("v-list-item",{attrs:{slot:"activator"},slot:"activator"},[a("v-list-item-content",[a("v-list-item-title",[t._v(" Tienda ")])],1)],1),a("v-list-item",{attrs:{to:{name:"tienda"}}},[a("v-list-item-action",[a("v-icon",[t._v("mdi-finance")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Productos")])],1)],1)],1)]:t._e()],2)],1):t._e(),a("v-app-bar",{attrs:{"clipped-left":t.$vuetify.breakpoint.lgAndUp,app:"",color:"primary",dark:""}},[a("v-toolbar-title",{staticClass:"ml-0 pl-3",staticStyle:{width:"300px"}},[t.logueado?a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}):t._e(),a("span",{staticClass:"hidden-sm-and-down"},[t._v("CRM Tienda")])],1),a("v-spacer"),t.$vuetify.theme.dark?a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({attrs:{icon:"",small:"",fab:""},on:{click:t.modoOscuro}},o),[a("v-icon",[t._v("mdi-weather-night ")])],1)]}}])},[a("span",[t._v("Cambiar a modo dia ")])]):a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-btn",t._g({attrs:{icon:"",small:"",fab:""},on:{click:t.modoOscuro}},o),[a("v-icon",[t._v("mdi-white-balance-sunny")])],1)]}}],null,!1,2306206872)},[a("span",[t._v("Cambiar a modo noche")])]),t.logueado?a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}):t._e(),t.logueado?a("v-menu",{attrs:{bottom:"","min-width":"200px",rounded:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[a("v-subheader",t._g({staticClass:"mouse"},o),[t._v(t._s(t.$store.state.usuario.email))])]}}],null,!1,2600429654)},[a("v-card",[a("v-list-item-content",{staticClass:"justify-center"},[a("div",{staticClass:"mx-auto text-center"},[a("v-avatar",{attrs:{color:"purple"}},[a("span",{staticClass:"white--text text-h5"})]),a("h3",[t._v(t._s(t.$store.state.usuario.email))]),a("p",{staticClass:"text-caption mt-1"},[t._v(" "+t._s(t.$store.state.usuario.rol)+" ")]),a("v-divider",{staticClass:"my-3"}),a("v-btn",{attrs:{depressed:"",rounded:"",text:""}},[t._v(" Editar Cuenta ")])],1)])],1)],1):t._e(),a("span"),t.logueado?a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}):t._e(),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("span",t._g(t._b({},"span",i,!1),o),[t.logueado?a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.salir()}}},[a("v-icon",[t._v("logout")])],1):t._e()],1)]}}])},[a("span",[t._v("Salir de la sesión")])])],1),a("v-main",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-slide-y-transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1)],1),a("v-footer",{attrs:{height:"auto"}},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{"text-xs-center":""}},[a("v-card",{staticClass:"white--text",attrs:{flat:"",tile:"",color:"primary"}},[a("v-card-text",{staticClass:"white--text text-sm-right"},[t._v(" Diego Vázquez Gómez ©2021 ")])],1)],1)],1)],1)],1)},r=[],n={name:"App",opts:{theme:{dark:!1}},data:function(){return{goDark:!1,drawer:!0,icono:"mdi-weather-night",notificaciones:0,modoActual:1}},computed:{logueado:function(){return this.$store.state.usuario&&this.$store.state.usuario.rol},esAdministrador:function(){return this.$store.state.usuario&&"Administrador"==this.$store.state.usuario.rol},esAlmacenero:function(){return this.$store.state.usuario&&"Almacenero"==this.$store.state.usuario.rol},esVendedor:function(){return this.$store.state.usuario&&"Vendedor"==this.$store.state.usuario.rol},esComprador:function(){return this.$store.state.usuario&&"Comprador"==this.$store.state.usuario.rol}},created:function(){this.$store.dispatch("autoLogin"),this.$vuetify.theme.dark=!1},methods:{salir:function(){this.$store.dispatch("salir")},modoOscuro:function(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark}}},s=n,c=(a("b926"),a("2877")),l=a("6544"),d=a.n(l),u=a("7496"),v=a("40dc"),m=a("5bc1"),p=a("8212"),h=a("8336"),_=a("b0af"),b=a("99d9"),f=a("a523"),g=a("ce7e"),x=a("0e8f"),k=a("553a"),C=a("132d"),y=a("a722"),V=a("8860"),A=a("56b0"),I=a("da13"),T=a("1800"),D=a("5d23"),j=a("f6c4"),w=a("e449"),M=a("f774"),S=a("0789"),N=a("2fa4"),P=a("e0c7"),$=a("2a7f"),E=a("3a2f"),O=Object(c["a"])(s,i,r,!1,null,"2d56fa84",null),F=O.exports;d()(O,{VApp:u["a"],VAppBar:v["a"],VAppBarNavIcon:m["a"],VAvatar:p["a"],VBtn:h["a"],VCard:_["a"],VCardText:b["c"],VContainer:f["a"],VDivider:g["a"],VFlex:x["a"],VFooter:k["a"],VIcon:C["a"],VLayout:y["a"],VList:V["a"],VListGroup:A["a"],VListItem:I["a"],VListItemAction:T["a"],VListItemContent:D["a"],VListItemTitle:D["b"],VMain:j["a"],VMenu:w["a"],VNavigationDrawer:M["a"],VSlideYTransition:S["e"],VSpacer:N["a"],VSubheader:P["a"],VToolbarTitle:$["a"],VTooltip:E["a"]});a("d3b7");var L=a("8c4f"),B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("div",{attrs:{id:"app"}},[a("v-app",{attrs:{id:"inspire"}},[a("v-snackbar",{attrs:{icon:"mdi-pencil",transition:"scale-transition",value:t.alerta_edit,absolute:"",top:"",right:"",tile:"",color:"success accent-2",timeout:3e3,elevation:"24"}},[t._v(t._s(t.mensaje))]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.categorias,search:t.search,"sort-by":"nombre",loading:t.loading},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Categorias")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),o),[t._v(" Nueva ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Descripcion"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1),a("v-col",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{cols:"12",sm:"12",md:"12"}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancelar ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.guardar}},[t._v(" Guardar ")])],1)],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[t._v("¿Está seguro de borrar la categoría?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),a("v-spacer")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Activar Item ")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Desactivar Item ")]):t._e(),a("v-card-text",[t._v(" Estás a punto de "),1==t.adAccion?a("span",[t._v("activar ")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar ")]):t._e(),t._v(" el item "+t._s(t.adNombre)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:"text"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v(" Cancelar ")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",text:"text"},on:{click:function(e){return t.activar()}}},[t._v(" Activar ")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",text:"text"},on:{click:function(e){return t.desactivar()}}},[t._v(" Desactivar ")]):t._e()],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"orange"}},"v-btn",r,!1),i),[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")])],1)]}}],null,!0)},[a("span",[t._v("Editar Categoria")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"red"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-delete ")])],1)]}}],null,!0)},[a("span",[t._v("Borrar Categoria")])]),a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[o.estado?[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"red"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(2,o)}}},[t._v(" mdi-cancel ")])],1)]:[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"green"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(1,o)}}},[t._v(" check ")])],1)]]}}],null,!0)},[o.estado?a("span",[t._v("Desactivar Categoria")]):a("span",[t._v("Activar Categoria")])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.listar}},[t._v(" Reset ")])]},proxy:!0}],null,!0)})],1)],1)])],1)},R=[],q=(a("a434"),a("bc3a")),U=a.n(q),z={data:function(){return{categorias:[],search:"",dialog:!1,dialogDelete:!1,headers:[{text:"Nombre",value:"nombre",sortable:!0},{text:"Descripcion",value:"descripcion",sortable:!1},{text:"Estado",value:"estado",sortable:!1},{text:"Opciones",value:"actions",sortable:!1}],editedIndex:-1,_id:"",nombre:"",descripcion:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",alerta_edit:!1,alerta_add:!1,alerta_delete:!1,mensaje:null,loading:!0}},computed:{formTitle:function(){return this.editedIndex,"Nueva Categoria"}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){var t=this;this.listar(),setTimeout((function(){t.alerta_edit=!1}),5e3),setTimeout((function(){t.alerta_add=!1}),5e3)},methods:{listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.get("categoria/list",a).then((function(e){t.categorias=e.data,t.loading=!1})).catch((function(t){console.log(t)}))},guardar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};this.validar()||(this.editedIndex>-1?(U.a.put("categoria/update",{_id:this._id,nombre:this.nombre,descripcion:this.descripcion},a).then((function(e){t.limpiar(),t.close(),t.listar(),t.alerta_edit=!0,t.mensaje="Categoria editada"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null):(U.a.post("categoria/add",{nombre:this.nombre,descripcion:this.descripcion},a).then((function(e){t.limpiar(),t.close(),t.listar(),t.alerta_edit=!0,t.mensaje="Categoria añadida"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null))},limpiar:function(){this._id="",this.nombre="",this.descripcion="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],(this.nombre.length<1||this.nombre.length>50)&&this.validaMensaje.push("El nombre de la categoría debe tener entre 1-50 caracteres."),this.descripcion.length>255&&this.validaMensaje.push("La descripción de la categoría no debe tener más de 255 caracteres."),this.validaMensaje.length&&(this.valida=1),this.valida},editItem:function(t){this._id=t._id,this.nombre=t.nombre,this.descripcion=t.descripcion,this.dialog=!0,this.editedIndex=1},deleteItem:function(t){},deleteItemConfirm:function(){this.categorias.splice(this.editedIndex,1),this.closeDelete()},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},ocultar_alerta:function(){this.alerta_edit&&(console.log("Ocultar"),setTimeout(this.alerta_edit=!1,5e3))},activar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.put("categoria/activate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar(),t.alerta_edit=!0,t.mensaje="Categoria activada"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null},desactivar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.put("categoria/deactivate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar(),t.alerta_edit=!0,t.mensaje="Categoria desactivada"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombre,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0}}},K=z,G=a("62ad"),J=a("8fea"),W=a("169a"),H=a("0fd9"),Y=a("2db4"),Q=a("8654"),X=a("71d9"),Z=Object(c["a"])(K,B,R,!1,null,null,null),tt=Z.exports;d()(Z,{VApp:u["a"],VBtn:h["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:G["a"],VContainer:f["a"],VDataTable:J["a"],VDialog:W["a"],VDivider:g["a"],VFlex:x["a"],VIcon:C["a"],VLayout:y["a"],VRow:H["a"],VSnackbar:Y["a"],VSpacer:N["a"],VTextField:Q["a"],VToolbar:X["a"],VToolbarTitle:$["a"],VTooltip:E["a"]});var et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("div",{attrs:{id:"app"}},[a("v-app",{attrs:{id:"inspire"}},[a("v-snackbar",{attrs:{icon:"mdi-pencil",transition:"scale-transition",value:t.alerta_edit,absolute:"",top:"",right:"",tile:"",color:"success accent-2",timeout:3e3,elevation:"24"}},[t._v(t._s(t.mensaje))]),a("v-snackbar",{attrs:{icon:"mdi-pencil",value:t.alerta_add,absolute:"",top:"",right:"",tile:"",color:"success accent-2",timeout:2e3}},[t._v("Categoria añadida correctamente")]),a("v-snackbar",{attrs:{icon:"mdi-pencil",value:t.alerta_delete,absolute:"",top:"",right:"",tile:"",color:"success accent-2",timeout:2e3}},[t._v("Categoria borrada correctamente")]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.articulos,search:t.search,"sort-by":"nombre",loading:t.loading},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",i,!1),o),[a("v-icon",{attrs:{icon:"",large:""},on:{click:function(e){return t.crearpdf()}}},[t._v(" mdi-file-pdf-box ")])],1)]}}])},[a("span",[t._v("Descargar PDF")])]),a("v-toolbar-title",[t._v("Articulos")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),o),[t._v(" Nuevo ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Código",type:"number"},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-select",{attrs:{items:t.categorias,label:"Categoria"},model:{value:t.categoria,callback:function(e){t.categoria=e},expression:"categoria"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Nombre",type:"text"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Stock",type:"number"},model:{value:t.stock,callback:function(e){t.stock=e},expression:"stock"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Precio",type:"number"},model:{value:t.precio_venta,callback:function(e){t.precio_venta=e},expression:"precio_venta"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Descripcion"},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"URL Imagen",type:"text"},model:{value:t.imagen,callback:function(e){t.imagen=e},expression:"imagen"}})],1),a("v-col",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{cols:"12",sm:"12",md:"12"}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancelar ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.guardar}},[t._v(" Guardar ")])],1)],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[t._v("¿Está seguro de borrar el articulo?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),a("v-spacer")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Activar Item ")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Desactivar Item ")]):t._e(),a("v-card-text",[t._v(" Estás a punto de "),1==t.adAccion?a("span",[t._v("activar ")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar ")]):t._e(),t._v(" el item "+t._s(t.adNombre)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:"text"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v(" Cancelar ")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",text:"text"},on:{click:function(e){return t.activar()}}},[t._v(" Activar ")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",text:"text"},on:{click:function(e){return t.desactivar()}}},[t._v(" Desactivar ")]):t._e()],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"orange"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")])],1)]}}],null,!0)},[a("span",[t._v("Editar Articulo")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"red"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-delete ")])],1)]}}],null,!0)},[a("span",[t._v("Borrar Articulo")])]),a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[o.estado?[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"red"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(2,o)}}},[t._v(" mdi-cancel ")])],1)]:[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"green"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(1,o)}}},[t._v(" check ")])],1)]]}}],null,!0)},[o.estado?a("span",[t._v("Desactivar Articulo")]):a("span",[t._v("Activar Articulo")])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.listar}},[t._v(" Reset ")])]},proxy:!0}],null,!0)})],1)],1)])],1)},at=[],ot=(a("d81d"),a("8baf")),it=(a("0da4"),{data:function(){return{articulos:[],search:"",dialog:!1,dialogDelete:!1,headers:[{text:"Código",value:"codigo",sortable:!0,width:"6%"},{text:"Nombre",value:"nombre",sortable:!0,width:"10%"},{text:"Categoria",value:"categoria.nombre",sortable:!1,width:"6%"},{text:"Stock",value:"stock",sortable:!0,width:"6%"},{text:"Precio Venta",value:"precio_venta",sortable:!0,width:"6%"},{text:"Descripcion",value:"descripcion",sortable:!1,width:"50%"},{text:"Opciones",value:"actions",sortable:!1,width:"16%"}],editedIndex:-1,_id:"",categoria:"",categorias:[],codigo:"",nombre:"",stock:0,precio_venta:0,descripcion:"",imagen:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",alerta_edit:!1,alerta_add:!1,alerta_delete:!1,mensaje:null,loading:!0}},computed:{formTitle:function(){return this.editedIndex,"Nueva Categoria"}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){var t=this;this.listar(),setTimeout((function(){t.alerta_edit=!1}),5e3),setTimeout((function(){t.alerta_add=!1}),5e3),this.selectCategoria()},methods:{crearpdf:function(){var t=[{title:"Nombre",dataKey:"nombre"},{title:"Código",dataKey:"codigo"},{title:"Categoría",dataKey:"categoria"},{title:"Stock",dataKey:"stock"},{title:"Precio Venta",dataKey:"precio_venta"}],e=[];this.articulos.map((function(t){e.push({nombre:t.nombre,codigo:t.codigo,categoria:t.categoria.nombre,stock:t.stock,precio_venta:t.precio_venta})}));var a=new ot["default"]("p","pt");a.autoTable(t,e,{margin:{top:60},didDrawPage:function(t){a.text("Lista de Artículos",40,30)}}),a.save("Articulos.pdf")},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.get("articulo/list",a).then((function(e){t.articulos=e.data,t.loading=!1})).catch((function(t){console.log(t)}))},guardar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};this.validar()||(this.editedIndex>-1?(U.a.put("articulo/update",{_id:this._id,categoria:this.categoria,codigo:this.codigo,nombre:this.nombre,stock:this.stock,precio_venta:this.precio_venta,descripcion:this.descripcion,imagen:this.imagen},a).then((function(e){t.limpiar(),t.close(),t.listar(),t.alerta_edit=!0,t.mensaje="Articulo editado correctamente"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null):(U.a.post("articulo/add",{_id:this._id,categoria:this.categoria,codigo:this.codigo,nombre:this.nombre,stock:this.stock,precio_venta:this.precio_venta,descripcion:this.descripcion,imagen:this.imagen},a).then((function(e){t.limpiar(),t.close(),t.listar(),t.alerta_edit=!0,t.mensaje="Articulo añadido correctamente"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null))},limpiar:function(){this._id="",this.codigo="",this.nombr="",this.stock=0,this.precio_venta=0,this.escripcion="",this.imagen="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],this.categoria||this.validaMensaje.push("Seleccione una categoría"),this.codigo.length>64&&this.validaMensaje.push("El código no debe tener más de 64 caracteres"),(this.nombre.length<1||this.nombre.length>50)&&this.validaMensaje.push("El nombre del artículo debe tener entre 1-50 caracteres."),this.descripcion.length>255&&this.validaMensaje.push("La descripción del artículo no debe tener más de 255 caracteres."),this.stock<0&&this.validaMensaje.push("Ingrese un stock valido"),this.precio_venta<0&&this.validaMensaje.push("Ingrese un precio de venta valido"),this.validaMensaje.length&&(this.valida=1),this.valida},editItem:function(t){this._id=t._id,this.categoria=t.categoria._id,this.codigo=t.codigo,this.nombre=t.nombre,this.stock=t.stock,this.precio_venta=t.precio_venta,this.descripcion=t.descripcion,this.imagen=t.imagen,this.dialog=!0,this.editedIndex=1},deleteItem:function(t){},deleteItemConfirm:function(){this.articulos.splice(this.editedIndex,1),this.closeDelete()},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},ocultar_alerta:function(){this.alerta_edit&&(console.log("Ocultar"),setTimeout(this.alerta_edit=!1,5e3))},activar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.put("articulo/activate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar(),t.alerta_edit=!0,t.mensaje="Articulo activado"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null},desactivar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.put("articulo/deactivate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar(),t.alerta_edit=!0,t.mensaje="Articulo desactivado"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombre,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},selectCategoria:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};U.a.get("categoria/list",o).then((function(a){t.loading=!1,e=a.data,e.map((function(e){t.categorias.push({text:e.nombre,value:e._id})}))})).catch((function(t){console.log(t)}))}}}),rt=it,nt=a("b974"),st=Object(c["a"])(rt,et,at,!1,null,null,null),ct=st.exports;d()(st,{VApp:u["a"],VBtn:h["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:G["a"],VContainer:f["a"],VDataTable:J["a"],VDialog:W["a"],VDivider:g["a"],VFlex:x["a"],VIcon:C["a"],VLayout:y["a"],VRow:H["a"],VSelect:nt["a"],VSnackbar:Y["a"],VSpacer:N["a"],VTextField:Q["a"],VToolbar:X["a"],VToolbarTitle:$["a"],VTooltip:E["a"]});var lt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-container",[o("v-row",{attrs:{align:"center",justify:"center"}},[o("div",{staticClass:"d-flex flex-column justify-space-between align-center"},[o("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[o("v-img",{attrs:{"aspect-ratio":16/9,width:"247",height:"114",src:a("c4f5"),"align-center":""}})],1)],1),o("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[o("h1",{staticClass:"text-h4 font-weight-thin mb-4"},[t._v(" DAW - Sistema de gestión tienda ")]),o("h4",{staticClass:"subheading"},[t._v("Proyecto Diego Vázquez")])])],1)],1)},dt=[],ut={name:"Home",data:function(){return{}}},vt=ut,mt=a("adda"),pt=Object(c["a"])(vt,lt,dt,!1,null,null,null),ht=pt.exports;d()(pt,{VCol:G["a"],VContainer:f["a"],VImg:mt["a"],VRow:H["a"]});var _t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md6:"",lg5:"",xl4:""}},[a("v-alert",{attrs:{dense:"",outlined:"",type:"error",value:t.alerta}},[a("strong",[t._v("Error: ")]),t._v(" "+t._s(this.errorM)+" ")]),a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v(" Acceso al Sistema ")])],1),a("v-card-text",[a("v-text-field",{attrs:{autofocus:"",color:"primary",label:"Email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{type:"password",color:t.color,label:"Password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-card-actions",{staticClass:"px-3 pb-3"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("span",t._g(t._b({},"span",i,!1),o),[a("v-flex",{attrs:{"text-xs-right":""}},[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.login()}}},[t._v("Ingresar")])],1)],1)]}}])},[a("span",[t._v("Ingresar en la aplicación")])])],1)],1)],1)],1)},bt=[],ft={data:function(){return{email:"",password:"",alerta:!1,errorM:null,color:"accent"}},methods:{login:function(){var t=this;U.a.post("usuario/login",{email:this.email,password:this.password}).then((function(t){return console.log(t.data.user.nombre),console.log(t.data.tokenReturn),t.data})).then((function(e){t.$store.dispatch("guardarToken",e.tokenReturn),t.$router.push({name:"home"}).catch((function(){}))})).catch((function(e){console.log(e),""==t.email?(t.errorM="El email no puede estar vacio",t.color="red"):""==t.password?(t.errorM="La contraseña no puede estar vacia",t.color="red"):404==e.response.status?t.errorM="No existe el usuario o las credenciales son incorrectas":t.errorM="Ocurrió un error con el servidor",t.alerta=!0}))}}},gt=ft,xt=a("0798"),kt=Object(c["a"])(gt,_t,bt,!1,null,null,null),Ct=kt.exports;d()(kt,{VAlert:xt["a"],VBtn:h["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["c"],VFlex:x["a"],VLayout:y["a"],VTextField:Q["a"],VToolbar:X["a"],VToolbarTitle:$["a"],VTooltip:E["a"]});var yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-center":""}},[a("v-container",{attrs:{fluid:""}},[a("v-data-iterator",{attrs:{items:t.articulos,"hide-default-footer":"",search:t.search,categoria:t.categoria,"items-per-page":t.itemsPerPage,page:t.page},on:{"update:itemsPerPage":function(e){t.itemsPerPage=e},"update:items-per-page":function(e){t.itemsPerPage=e},"update:page":function(e){t.page=e}},scopedSlots:t._u([{key:"header",fn:function(){return[a("v-col",{attrs:{cols:"12",sm:"12",md:"12","justify-end":""}},[a("v-btn",{attrs:{icon:"",to:{name:"checkout"}}},[a("v-badge",{attrs:{content:t.notificacion,value:t.notificacion,color:"green",overlap:""}},[a("v-icon",{attrs:{large:""}},[t._v(" mdi-cart ")])],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6",sm:"12",md:"6"}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-select",{attrs:{items:t.categorias,label:"Categoria"},model:{value:t.categoria,callback:function(e){t.categoria=e},expression:"categoria"}})],1)],1),a("v-divider"),a("v-row",{staticClass:"mt-2",attrs:{align:"center",justify:"center"}},[a("span",{staticClass:"grey--text"},[t._v("Artículos por página")]),a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"ml-2",attrs:{dark:"",text:"",color:"primary"}},"v-btn",i,!1),o),[t._v(" "+t._s(t.itemsPerPage)+" "),a("v-icon",[t._v("mdi-chevron-down")])],1)]}}])},[a("v-list",t._l(t.itemsPerPageArray,(function(e,o){return a("v-list-item",{key:o,on:{click:function(a){return t.updateItemsPerPage(e)}}},[a("v-list-item-title",[t._v(t._s(e))])],1)})),1)],1),a("v-spacer"),a("span",{staticClass:"mr-4 grey--text"},[t._v(" Página "+t._s(t.page)+" de "+t._s(t.numberOfPages)+" ")]),a("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"",color:"blue darken-3"},on:{click:t.formerPage}},[a("v-icon",[t._v("mdi-chevron-left")])],1),a("v-btn",{staticClass:"ml-1",attrs:{fab:"",dark:"",color:"blue darken-3"},on:{click:t.nextPage}},[a("v-icon",[t._v("mdi-chevron-right")])],1)],1)]},proxy:!0},{key:"default",fn:function(e){return[a("v-row",t._l(e.items,(function(e){return a("v-col",{key:e.nombre,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[a("v-card",{staticClass:"mx-auto my-12",attrs:{loading:t.loading,"max-width":"374"}},[a("template",{slot:"progress"},[a("v-progress-linear",{attrs:{color:"deep-purple",height:"10",indeterminate:""}})],1),a("v-img",{attrs:{height:"250",src:e.imagen}}),a("v-card-title",[t._v(t._s(e.nombre))]),a("v-card-text",[a("div",{staticClass:"my-4 text-subtitle-1"},[t._v(" Categoría - "+t._s(e.categoria.nombre)+" ")]),a("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[a("v-rating",{attrs:{value:4.5,color:"amber",dense:"","half-increments":"",readonly:"",size:"14"}}),a("div",{staticClass:"grey--text ms-4"},[t._v("4.5 (413)")])],1)],1),a("v-card-text",{staticStyle:{height:"100px","overflow-y":"auto"}},[t._v(t._s(e.descripcion))]),a("v-divider",{staticClass:"mx-4"}),a("v-row",{staticClass:"mt-2",attrs:{align:"center",justify:"center"}},[a("v-card-title",[t._v("Precio: "+t._s(e.precio_venta)+" €")])],1),a("v-row",{staticClass:"mt-2",attrs:{align:"center",justify:"center"}},[a("v-card-subtitle",[t._v(" Disponibles: "+t._s(e.stock)+" ")])],1),a("v-row",{staticClass:"mt-2",attrs:{align:"center",justify:"center"}},[a("v-card-actions",{attrs:{"align-center":""}},[a("v-btn",{attrs:{color:"deep-purple lighten-2",text:"",align:"right"},on:{click:function(a){return t.comprar(e._id)}}},[t._v(" Comprar "),a("v-icon",[t._v("mdi-cart")])],1)],1)],1)],2)],1)})),1)]}},{key:"footer",fn:function(){return[a("v-row",{staticClass:"mt-2 d-none d-lg-flex d-xl-none",attrs:{align:"center",justify:"center"}},[a("span",{staticClass:"grey--text"},[t._v("Artículos por página")]),a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"ml-2",attrs:{dark:"",text:"",color:"primary"}},"v-btn",i,!1),o),[t._v(" "+t._s(t.itemsPerPage)+" "),a("v-icon",[t._v("mdi-chevron-down")])],1)]}}])},[a("v-list",t._l(t.itemsPerPageArray,(function(e,o){return a("v-list-item",{key:o,on:{click:function(a){return t.updateItemsPerPage(e)}}},[a("v-list-item-title",[t._v(t._s(e))])],1)})),1)],1),a("v-spacer"),a("span",{staticClass:"mr-4 grey--text"},[t._v(" Página "+t._s(t.page)+" de "+t._s(t.numberOfPages)+" ")]),a("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"",color:"blue darken-3"},on:{click:t.formerPage}},[a("v-icon",[t._v("mdi-chevron-left")])],1),a("v-btn",{staticClass:"ml-1",attrs:{fab:"",dark:"",color:"blue darken-3"},on:{click:t.nextPage}},[a("v-icon",[t._v("mdi-chevron-right")])],1)],1)]},proxy:!0}])})],1)],1)},Vt=[],At=(a("4de4"),a("ddb0"),a("b0c0"),{data:function(){return{nombre:null,_id:"",imagen:null,articulos:[],loading:!1,descripcion:null,precio_venta:null,stock:null,itemsPerPage:4,itemsPerPageArray:[4,8,12],page:1,search:"",notificacion:0,categorias:[],categoria:""}},created:function(){this.listar(),this.selectCategoria()},methods:{listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.get("articulo/list",a).then((function(e){t.articulos=e.data,t.loading=!1,console.log(t.articulos),t.articulos.map((function(e){t.nombre=e.nombre,t.imagen=e.imagen,t.descripcion=e.descripcion,t.precio=e.precio_venta,t.stock=e.stock}))})).catch((function(t){console.log(t)}))},comprar:function(t){var e=this,a={Token:this.$store.state.token};console.log(this._id);var o={headers:a};U.a.put("articulo/comprar",{_id:t},o).then((function(t){e.adModal=0,e.adAccion=0,e.adNombre="",e.adId="",e.listar(),e.alerta_edit=!0,e.mensaje="Articulo Comprado",e.notificacion++})).catch((function(t){console.log(t)})),e.alerta_edit=!1,e.mensaje=null},nextPage:function(){this.page+1<=this.numberOfPages&&(this.page+=1)},formerPage:function(){this.page-1>=1&&(this.page-=1)},updateItemsPerPage:function(t){this.itemsPerPage=t},selectCategoria:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};U.a.get("categoria/list",o).then((function(a){t.loading=!1,e=a.data,e.map((function(e){t.categorias.push({text:e.nombre,value:e._id})}))})).catch((function(t){console.log(t)}))}},computed:{numberOfPages:function(){return Math.ceil(this.articulos.length/this.itemsPerPage)},filteredKeys:function(){return this.keys.filter((function(t){return"nombre"!==t}))},height:function(){switch(this.$vuetify.breakpoint.name){case"xs":return 220;case"sm":return 400;case"md":return 500;case"lg":return 600;case"xl":return 800}}}}),It=At,Tt=a("4ca6"),Dt=a("c377"),jt=a("8e36"),wt=a("1d4d"),Mt=Object(c["a"])(It,yt,Vt,!1,null,null,null),St=Mt.exports;d()(Mt,{VBadge:Tt["a"],VBtn:h["a"],VCard:_["a"],VCardActions:b["a"],VCardSubtitle:b["b"],VCardText:b["c"],VCardTitle:b["d"],VCol:G["a"],VContainer:f["a"],VDataIterator:Dt["a"],VDivider:g["a"],VIcon:C["a"],VImg:mt["a"],VLayout:y["a"],VList:V["a"],VListItem:I["a"],VListItemTitle:D["b"],VMenu:w["a"],VProgressLinear:jt["a"],VRating:wt["a"],VRow:H["a"],VSelect:nt["a"],VSpacer:N["a"],VTextField:Q["a"]});var Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("div",{attrs:{id:"app"}},[a("v-app",{attrs:{id:"inspire"}},[a("v-snackbar",{attrs:{icon:"mdi-pencil",transition:"scale-transition",value:t.alerta_edit,absolute:"",top:"",right:"",tile:"",color:"success accent-2",timeout:3e3,elevation:"24"}},[t._v(t._s(t.mensaje))]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.usuarios,search:t.search,"sort-by":"nombre",loading:t.loading},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Usuarios")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),o),[t._v(" Nuevo ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Nombre",type:"name"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:t.roles,label:"Rol"},model:{value:t.rol,callback:function(e){t.rol=e},expression:"rol"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:t.tipo_documento_array,label:"Tipo Doc"},model:{value:t.tipo_documento,callback:function(e){t.tipo_documento=e},expression:"tipo_documento"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Nº Documento"},model:{value:t.num_documento,callback:function(e){t.num_documento=e},expression:"num_documento"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Direccion",type:"adress"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Teléfono",type:"phone"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"email",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Contraseña",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-col",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{cols:"12",sm:"12",md:"12"}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancelar ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.guardar}},[t._v(" Guardar ")])],1)],1)],1)],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6","justify-center":""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Búsqueda",outlined:"",shaped:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[t._v("¿Está seguro de borrar la categoría?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),a("v-spacer")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Activar Item ")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Desactivar Item ")]):t._e(),a("v-card-text",[t._v(" Estás a punto de "),1==t.adAccion?a("span",[t._v("activar ")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar ")]):t._e(),t._v(" el item "+t._s(t.adNombre)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:"text"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v(" Cancelar ")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",text:"text"},on:{click:function(e){return t.activar()}}},[t._v(" Activar ")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",text:"text"},on:{click:function(e){return t.desactivar()}}},[t._v(" Desactivar ")]):t._e()],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"orange"}},"v-btn",r,!1),i),[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")])],1)]}}],null,!0)},[a("span",[t._v("Editar Categoria")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"red"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-delete ")])],1)]}}],null,!0)},[a("span",[t._v("Borrar Categoria")])]),a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[o.estado?[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"red"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(2,o)}}},[t._v(" mdi-cancel ")])],1)]:[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"green"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(1,o)}}},[t._v(" check ")])],1)]]}}],null,!0)},[o.estado?a("span",[t._v("Desactivar Categoria")]):a("span",[t._v("Activar Categoria")])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.listar}},[t._v(" Reset ")])]},proxy:!0}],null,!0)})],1)],1)])],1)},Pt=[],$t={data:function(){return{usuarios:[],search:"",dialog:!1,dialogDelete:!1,headers:[{text:"Nombre",value:"nombre",sortable:!0},{text:"Rol",value:"rol",sortable:!0},{text:"Tipo Documento",value:"tipo_documento",sortable:!0},{text:"Número Documento",value:"num_documento",sortable:!1},{text:"Direccion",value:"direccion",sortable:!1},{text:"Teléfono",value:"telefono",sortable:!1},{text:"Email",value:"email",sortable:!1},{text:"Estado",value:"estado",sortable:!1},{text:"Opciones",value:"actions",sortable:!1}],editedIndex:-1,_id:"",nombre:"",rol:"",roles:["Administrador","Vendedor","Almacenero","Comprador"],tipo_documento:"",tipo_documento_array:["DNI","Pasaporte","CIF"],num_documento:"",direccion:"",telefono:"",email:"",password:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",alerta_edit:!1,alerta_add:!1,alerta_delete:!1,mensaje:null,loading:!0}},computed:{formTitle:function(){return this.editedIndex,"Nueva Categoria"}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){var t=this;this.listar(),setTimeout((function(){t.alerta_edit=!1}),5e3),setTimeout((function(){t.alerta_add=!1}),5e3)},methods:{listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.get("usuario/list",a).then((function(e){t.usuarios=e.data,t.loading=!1})).catch((function(t){console.log(t)}))},guardar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};this.validar()||(this.editedIndex>-1?(U.a.put("usuario/update",{_id:this._id,rol:this.rol,nombre:this.nombre,tipo_documento:this.tipo_documento,num_documento:this.num_documento,direccion:this.direccion,telefono:this.telefono,email:this.email,password:this.password},a).then((function(e){t.limpiar(),t.close(),t.listar(),t.alerta_edit=!0})).catch((function(t){console.log(t)})),t.alerta_edit=!1):(U.a.post("usuario/add",{rol:this.rol,nombre:this.nombre,tipo_documento:this.tipo_documento,num_documento:this.num_documento,direccion:this.direccion,telefono:this.telefono,email:this.email,password:this.password},a).then((function(e){t.limpiar(),t.close(),t.listar(),t.alerta_add=!0})).catch((function(t){console.log(t)})),t.alerta_add=!1))},limpiar:function(){this._id="",this.nombre="",this.rol="",this.nombre="",this.num_documento="",this.direccion="",this.telefono="",this.email="",this.password="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],this.rol||this.validaMensaje.push("Seleccione un rol."),(this.nombre.length<1||this.nombre.length>50)&&this.validaMensaje.push("El nombre del usuario debe tener entre 1-50 caracteres."),this.num_documento.length>20&&this.validaMensaje.push("El documento no debe tener más de 20 caracteres."),this.direccion.length>70&&this.validaMensaje.push("La dirección no debe tener más de 70 caracteres."),this.telefono.length>20&&this.validaMensaje.push("El teléfono no debe tener más de 20 caracteres."),(this.email.length<1||this.nombre.length>50)&&this.validaMensaje.push("El email del usuario debe tener entre 1-50 caracteres."),(this.password.length<1||this.nombre.length>64)&&this.validaMensaje.push("El password del usuario debe tener entre 1-64 caracteres."),this.validaMensaje.length&&(this.valida=1),this.valida},editItem:function(t){this._id=t._id,this.rol=t.rol,this.nombre=t.nombre,this.tipo_documento=t.tipo_documento,this.num_documento=t.num_documento,this.direccion=t.direccion,this.telefono=t.telefono,this.email=t.email,this.password=t.password,this.dialog=!0,this.editedIndex=1,this.mensaje="Usuario modificado correctamente"},deleteItem:function(t){},deleteItemConfirm:function(){this.usuarios.splice(this.editedIndex,1),this.closeDelete()},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},ocultar_alerta:function(){this.alerta_edit&&(console.log("Ocultar"),setTimeout(this.alerta_edit=!1,5e3))},activar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.put("usuario/activate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar(),t.alerta_edit=!0,t.mensaje="Usuario activado"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null},desactivar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.put("usuario/deactivate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar(),t.alerta_edit=!0,t.mensaje="Usuario desactivado"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombre,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0}}},Et=$t,Ot=Object(c["a"])(Et,Nt,Pt,!1,null,null,null),Ft=Ot.exports;d()(Ot,{VApp:u["a"],VBtn:h["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:G["a"],VContainer:f["a"],VDataTable:J["a"],VDialog:W["a"],VDivider:g["a"],VFlex:x["a"],VIcon:C["a"],VLayout:y["a"],VRow:H["a"],VSelect:nt["a"],VSnackbar:Y["a"],VSpacer:N["a"],VTextField:Q["a"],VToolbar:X["a"],VToolbarTitle:$["a"],VTooltip:E["a"]});var Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("div",{attrs:{id:"app"}},[a("v-app",{attrs:{id:"inspire"}},[a("v-snackbar",{attrs:{icon:"mdi-pencil",transition:"scale-transition",value:t.alerta_edit,absolute:"",top:"",right:"",tile:"",color:"success accent-2",timeout:3e3,elevation:"24"}},[t._v(t._s(t.mensaje))]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.personas,search:t.search,"sort-by":"nombre",loading:t.loading},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Clientes")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),o),[t._v(" Nuevo ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Nombre",type:"name"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:t.tipo_documento_array,label:"Tipo Doc"},model:{value:t.tipo_documento,callback:function(e){t.tipo_documento=e},expression:"tipo_documento"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Nº Documento"},model:{value:t.num_documento,callback:function(e){t.num_documento=e},expression:"num_documento"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Direccion",type:"adress"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Teléfono",type:"phone"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"email",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-col",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{cols:"12",sm:"12",md:"12"}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancelar ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.guardar}},[t._v(" Guardar ")])],1)],1)],1)],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6","align-center":"","justify-center":""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Búsqueda",outlined:"",shaped:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[t._v("¿Está seguro de borrar el Cliente?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),a("v-spacer")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Activar Item ")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Desactivar Item ")]):t._e(),a("v-card-text",[t._v(" Estás a punto de "),1==t.adAccion?a("span",[t._v("activar ")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar ")]):t._e(),t._v(" el item "+t._s(t.adNombre)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:"text"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v(" Cancelar ")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",text:"text"},on:{click:function(e){return t.activar()}}},[t._v(" Activar ")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",text:"text"},on:{click:function(e){return t.desactivar()}}},[t._v(" Desactivar ")]):t._e()],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"orange"}},"v-btn",r,!1),i),[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")])],1)]}}],null,!0)},[a("span",[t._v("Editar Cliente")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"red"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-delete ")])],1)]}}],null,!0)},[a("span",[t._v("Borrar Cliente")])]),a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[o.estado?[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"red"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(2,o)}}},[t._v(" mdi-cancel ")])],1)]:[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"green"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(1,o)}}},[t._v(" check ")])],1)]]}}],null,!0)},[o.estado?a("span",[t._v("Desactivar Categoria")]):a("span",[t._v("Activar Categoria")])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.listar}},[t._v(" Reset ")])]},proxy:!0}],null,!0)})],1)],1)])],1)},Bt=[],Rt={data:function(){return{personas:[],search:"",dialog:!1,dialogDelete:!1,headers:[{text:"Nombre",value:"nombre",sortable:!0},{text:"Tipo Persona",value:"tipo_persona",sortable:!0},{text:"Tipo Documento",value:"tipo_documento",sortable:!0},{text:"Número Documento",value:"num_documento",sortable:!1},{text:"Email",value:"email",sortable:!1},{text:"Estado",value:"estado",sortable:!1},{text:"Opciones",value:"actions",sortable:!1}],editedIndex:-1,_id:"",nombre:"",rol:"",roles:["Administrador","Vendedor","Almacenero","Comprador"],tipo_documento:"",tipo_documento_array:["DNI","Pasaporte","CIF"],num_documento:"",tipo_persona:"Cliente",direccion:"",telefono:"",email:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",alerta_edit:!1,alerta_add:!1,alerta_delete:!1,mensaje:null,loading:!0}},computed:{formTitle:function(){return this.editedIndex,"Nueva Categoria"}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){var t=this;this.listar(),setTimeout((function(){t.alerta_edit=!1}),5e3),setTimeout((function(){t.alerta_add=!1}),5e3)},methods:{listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.get("persona/listClientes",a).then((function(e){t.personas=e.data,t.loading=!1})).catch((function(t){console.log(t)}))},guardar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};this.validar()||(this.editedIndex>-1?(U.a.put("persona/update",{_id:this._id,tipo_persona:this.tipo_persona,nombre:this.nombre,tipo_documento:this.tipo_documento,num_documento:this.num_documento,direccion:this.direccion,telefono:this.telefono,email:this.email},a).then((function(e){t.limpiar(),t.close(),t.listar(),t.alerta_edit=!0})).catch((function(t){console.log(t)})),t.alerta_edit=!1):(U.a.post("persona/add",{_id:this._id,tipo_persona:this.tipo_persona,nombre:this.nombre,tipo_documento:this.tipo_documento,num_documento:this.num_documento,direccion:this.direccion,telefono:this.telefono,email:this.email},a).then((function(e){t.limpiar(),t.close(),t.listar(),t.alerta_edit=!0,t.mensaje="Persona editada correctamente"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null))},limpiar:function(){this._id="",this.nombre="",this.rol="",this.nombre="",this.num_documento="",this.direccion="",this.telefono="",this.email="",this.password="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],(this.nombre.length<1||this.nombre.length>50)&&this.validaMensaje.push("El nombre de la persona debe tener entre 1-50 caracteres."),this.num_documento.length>20&&this.validaMensaje.push("El documento no debe tener más de 20 caracteres."),this.direccion.length>70&&this.validaMensaje.push("La dirección no debe tener más de 70 caracteres."),this.telefono.length>20&&this.validaMensaje.push("El teléfono no debe tener más de 20 caracteres."),this.nombre.length>50&&this.validaMensaje.push("El email del usuario debe tener menos de 50 caracteres."),this.validaMensaje.length&&(this.valida=1),this.valida},editItem:function(t){this._id=t._id,this.rol=t.rol,this.nombre=t.nombre,this.tipo_documento=t.tipo_documento,this.num_documento=t.num_documento,this.direccion=t.direccion,this.telefono=t.telefono,this.email=t.email,this.password=t.password,this.dialog=!0,this.editedIndex=1,this.mensaje="Persona modificado correctamente"},deleteItem:function(t){},deleteItemConfirm:function(){this.usuarios.splice(this.editedIndex,1),this.closeDelete()},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},ocultar_alerta:function(){this.alerta_edit&&(console.log("Ocultar"),setTimeout(this.alerta_edit=!1,5e3))},activar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.put("persona/activate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar(),t.alerta_edit=!0,t.mensaje="persona activado"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null},desactivar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.put("persona/deactivate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar(),t.alerta_edit=!0,t.mensaje="persona desactivado"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombre,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0}}},qt=Rt,Ut=Object(c["a"])(qt,Lt,Bt,!1,null,null,null),zt=Ut.exports;d()(Ut,{VApp:u["a"],VBtn:h["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:G["a"],VContainer:f["a"],VDataTable:J["a"],VDialog:W["a"],VDivider:g["a"],VFlex:x["a"],VIcon:C["a"],VLayout:y["a"],VRow:H["a"],VSelect:nt["a"],VSnackbar:Y["a"],VSpacer:N["a"],VTextField:Q["a"],VToolbar:X["a"],VToolbarTitle:$["a"],VTooltip:E["a"]});var Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("div",{attrs:{id:"app"}},[a("v-app",{attrs:{id:"inspire"}},[a("v-snackbar",{attrs:{icon:"mdi-pencil",transition:"scale-transition",value:t.alerta_edit,absolute:"",top:"",right:"",tile:"",color:"success accent-2",timeout:3e3,elevation:"24"}},[t._v(t._s(t.mensaje))]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.personas,search:t.search,"sort-by":"nombre",loading:t.loading},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Clientes")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),o),[t._v(" Nuevo ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Nombre",type:"name"},model:{value:t.nombre,callback:function(e){t.nombre=e},expression:"nombre"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:t.tipo_documento_array,label:"Tipo Doc"},model:{value:t.tipo_documento,callback:function(e){t.tipo_documento=e},expression:"tipo_documento"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Nº Documento"},model:{value:t.num_documento,callback:function(e){t.num_documento=e},expression:"num_documento"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Direccion",type:"adress"},model:{value:t.direccion,callback:function(e){t.direccion=e},expression:"direccion"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Teléfono",type:"phone"},model:{value:t.telefono,callback:function(e){t.telefono=e},expression:"telefono"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"email",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-col",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{cols:"12",sm:"12",md:"12"}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancelar ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.guardar}},[t._v(" Guardar ")])],1)],1)],1)],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6","align-center":"","justify-center":""}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Búsqueda",outlined:"",shaped:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[t._v("¿Está seguro de borrar el Cliente?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),a("v-spacer")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Activar Item ")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Desactivar Item ")]):t._e(),a("v-card-text",[t._v(" Estás a punto de "),1==t.adAccion?a("span",[t._v("activar ")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar ")]):t._e(),t._v(" el item "+t._s(t.adNombre)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:"text"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v(" Cancelar ")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",text:"text"},on:{click:function(e){return t.activar()}}},[t._v(" Activar ")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",text:"text"},on:{click:function(e){return t.desactivar()}}},[t._v(" Desactivar ")]):t._e()],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"orange"}},"v-btn",r,!1),i),[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")])],1)]}}],null,!0)},[a("span",[t._v("Editar Cliente")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"red"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-delete ")])],1)]}}],null,!0)},[a("span",[t._v("Borrar Cliente")])]),a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[o.estado?[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"red"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(2,o)}}},[t._v(" mdi-cancel ")])],1)]:[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"green"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(1,o)}}},[t._v(" check ")])],1)]]}}],null,!0)},[o.estado?a("span",[t._v("Desactivar Categoria")]):a("span",[t._v("Activar Categoria")])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.listar}},[t._v(" Reset ")])]},proxy:!0}],null,!0)})],1)],1)])],1)},Gt=[],Jt={data:function(){return{personas:[],search:"",dialog:!1,dialogDelete:!1,headers:[{text:"Nombre",value:"nombre",sortable:!0},{text:"Tipo Persona",value:"tipo_persona",sortable:!0},{text:"Tipo Documento",value:"tipo_documento",sortable:!0},{text:"Número Documento",value:"num_documento",sortable:!1},{text:"Email",value:"email",sortable:!1},{text:"Estado",value:"estado",sortable:!1},{text:"Opciones",value:"actions",sortable:!1}],editedIndex:-1,_id:"",nombre:"",rol:"",roles:["Administrador","Vendedor","Almacenero","Comprador"],tipo_documento:"",tipo_documento_array:["DNI","Pasaporte","CIF"],num_documento:"",tipo_persona:"Proveedor",direccion:"",telefono:"",email:"",valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",alerta_edit:!1,alerta_add:!1,alerta_delete:!1,mensaje:null,loading:!0}},computed:{formTitle:function(){return this.editedIndex,"Nueva Categoria"}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){var t=this;this.listar(),setTimeout((function(){t.alerta_edit=!1}),5e3),setTimeout((function(){t.alerta_add=!1}),5e3)},methods:{listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.get("persona/listProveedores",a).then((function(e){t.personas=e.data,t.loading=!1})).catch((function(t){console.log(t)}))},guardar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};this.validar()||(this.editedIndex>-1?(U.a.put("persona/update",{_id:this._id,tipo_persona:this.tipo_persona,nombre:this.nombre,tipo_documento:this.tipo_documento,num_documento:this.num_documento,direccion:this.direccion,telefono:this.telefono,email:this.email},a).then((function(e){t.limpiar(),t.close(),t.listar(),t.alerta_edit=!0})).catch((function(t){console.log(t)})),t.alerta_edit=!1):(U.a.post("persona/add",{_id:this._id,tipo_persona:this.tipo_persona,nombre:this.nombre,tipo_documento:this.tipo_documento,num_documento:this.num_documento,direccion:this.direccion,telefono:this.telefono,email:this.email},a).then((function(e){t.limpiar(),t.close(),t.listar(),t.alerta_edit=!0,t.mensaje="Persona editada correctamente"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null))},limpiar:function(){this._id="",this.nombre="",this.rol="",this.nombre="",this.num_documento="",this.direccion="",this.telefono="",this.email="",this.password="",this.valida=0,this.validaMensaje=[],this.editedIndex=-1},validar:function(){return this.valida=0,this.validaMensaje=[],(this.nombre.length<1||this.nombre.length>50)&&this.validaMensaje.push("El nombre de la persona debe tener entre 1-50 caracteres."),this.num_documento.length>20&&this.validaMensaje.push("El documento no debe tener más de 20 caracteres."),this.direccion.length>70&&this.validaMensaje.push("La dirección no debe tener más de 70 caracteres."),this.telefono.length>20&&this.validaMensaje.push("El teléfono no debe tener más de 20 caracteres."),this.nombre.length>50&&this.validaMensaje.push("El email del usuario debe tener menos de 50 caracteres."),this.validaMensaje.length&&(this.valida=1),this.valida},editItem:function(t){this._id=t._id,this.rol=t.rol,this.nombre=t.nombre,this.tipo_documento=t.tipo_documento,this.num_documento=t.num_documento,this.direccion=t.direccion,this.telefono=t.telefono,this.email=t.email,this.password=t.password,this.dialog=!0,this.editedIndex=1,this.mensaje="Persona modificado correctamente"},deleteItem:function(t){},deleteItemConfirm:function(){this.usuarios.splice(this.editedIndex,1),this.closeDelete()},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},ocultar_alerta:function(){this.alerta_edit&&(console.log("Ocultar"),setTimeout(this.alerta_edit=!1,5e3))},activar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.put("persona/activate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar(),t.alerta_edit=!0,t.mensaje="persona activado"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null},desactivar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.put("persona/deactivate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar(),t.alerta_edit=!0,t.mensaje="persona desactivado"})).catch((function(t){console.log(t)})),t.alerta_edit=!1,t.mensaje=null},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.nombre,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0}}},Wt=Jt,Ht=Object(c["a"])(Wt,Kt,Gt,!1,null,null,null),Yt=Ht.exports;d()(Ht,{VApp:u["a"],VBtn:h["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:G["a"],VContainer:f["a"],VDataTable:J["a"],VDialog:W["a"],VDivider:g["a"],VFlex:x["a"],VIcon:C["a"],VLayout:y["a"],VRow:H["a"],VSelect:nt["a"],VSnackbar:Y["a"],VSpacer:N["a"],VTextField:Q["a"],VToolbar:X["a"],VToolbarTitle:$["a"],VTooltip:E["a"]});var Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-start":""}},[a("v-flex",[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Ingresos")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),0==t.verNuevo?a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}):t._e(),a("v-spacer"),0==t.verNuevo?a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){return t.mostrarNuevo()}}},[t._v("Nuevo")]):t._e(),a("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Seleccione un artículo")])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.listarArticulos()},"click:append":t.listarArticulos},model:{value:t.texto,callback:function(e){t.texto=e},expression:"texto"}}),[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraArticulos,items:t.articulos},scopedSlots:t._u([{key:"item.seleccionar",fn:function(e){var o=e.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"green","justify-center":""}},"v-btn",r,!1),i),[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.agregarDetalle(o)}}},[t._v(" mdi-plus ")])],1)]}}],null,!0)},[a("span",[t._v("Añadir producto")])])]}},{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.codigo))]),a("td",[t._v(t._s(e.item.nombre))]),a("td",[t._v(t._s(e.item.categoria.nombre))]),a("td",[t._v(t._s(e.item.stock))]),a("td",[t._v(t._s(e.item.precio_venta))]),a("td",[t._v(t._s(e.item.descripcion))]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Activo")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}}],null,!0)})]],2)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancelar")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[a("v-card",[1==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Activar Item ")]):t._e(),2==t.adAccion?a("v-card-title",{staticClass:"headline"},[t._v(" Desactivar Item ")]):t._e(),a("v-card-text",[t._v(" Estás a punto de "),1==t.adAccion?a("span",[t._v("activar ")]):t._e(),2==t.adAccion?a("span",[t._v("desactivar ")]):t._e(),t._v(" el item "+t._s(t.adNombre)+" ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:"text"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v(" Cancelar ")]),1==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",text:"text"},on:{click:function(e){return t.activar()}}},[t._v(" Activar ")]):t._e(),2==t.adAccion?a("v-btn",{attrs:{color:"orange darken-4",text:"text"},on:{click:function(e){return t.desactivar()}}},[t._v(" Desactivar ")]):t._e()],1)],1)],1)],1),0==t.verNuevo?a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.ingresos,search:t.search},scopedSlots:t._u([{key:"item.opciones",fn:function(e){var o=e.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"orange"}},"v-btn",r,!1),i),[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.verIngreso(o)}}},[t._v(" mdi-tab ")])],1)]}}],null,!0)},[a("span",[t._v("Ver Ingreso")])]),a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[o.estado?[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"red"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(2,o)}}},[t._v(" mdi-cancel ")])],1)]:[a("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"green"}},"v-btn",r,!1),i),[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(1,o)}}},[t._v(" check ")])],1)]]}}],null,!0)},[o.estado?a("span",[t._v("Desactivar Ingreso")]):a("span",[t._v("Activar Ingreso")])])]}},{key:"items",fn:function(e){return[a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.verIngreso(e.item)}}},[t._v(" tab ")]),e.item.estado?[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(2,e.item)}}},[t._v(" block ")])]:[a("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(1,e.item)}}},[t._v(" check ")])]],2),a("td",[t._v(t._s(e.item.usuario.nombre))]),a("td",[t._v(t._s(e.item.persona.nombre))]),a("td",[t._v(t._s(e.item.tipo_comprobante))]),a("td",[t._v(t._s(e.item.serie_comprobante))]),a("td",[t._v(t._s(e.item.num_comprobante))]),a("td",[t._v(t._s(e.item.createdAt))]),a("td",[t._v(t._s(e.item.impuesto))]),a("td",[t._v(t._s(e.item.total))]),a("td",[e.item.estado?a("div",[a("span",{staticClass:"blue--text"},[t._v("Aceptado")])]):a("div",[a("span",{staticClass:"red--text"},[t._v("Anulado")])])])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("Resetear")])]},proxy:!0}],null,!0)}):t._e(),t.verNuevo?a("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-select",{attrs:{items:t.comprobantes,label:"Tipo Comprobante"},model:{value:t.tipo_comprobante,callback:function(e){t.tipo_comprobante=e},expression:"tipo_comprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Serie Comprobante"},model:{value:t.serie_comprobante,callback:function(e){t.serie_comprobante=e},expression:"serie_comprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{label:"Número Comprobante"},model:{value:t.num_comprobante,callback:function(e){t.num_comprobante=e},expression:"num_comprobante"}})],1),a("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",xl8:""}},[a("v-autocomplete",{attrs:{items:t.personas,label:"Proveedor"},model:{value:t.persona,callback:function(e){t.persona=e},expression:"persona"}})],1),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[a("v-text-field",{attrs:{type:"number",label:"Impuesto"},model:{value:t.impuesto,callback:function(e){t.impuesto=e},expression:"impuesto"}})],1),a("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",x8:""}},[a("v-text-field",{attrs:{label:"Código"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarCodigo()}},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),a("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("v-btn",{attrs:{small:"",fab:"",dark:"",color:"teal"},on:{click:function(e){return t.mostrarModalArticulos()}}},[a("v-icon",{attrs:{dark:""}},[t._v("list")])],1)],1),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.errorArticulo,expression:"errorArticulo"}],attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[a("div",{staticClass:"red--text",domProps:{textContent:t._s(t.errorArticulo)}})]),a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-default-footer":""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("tr",[a("td",{staticClass:"text-center"},[t._v(t._s(e.item.articulo))]),a("td",{staticClass:"text-center",attrs:{width:"30"}},[a("v-text-field",{attrs:{type:"number"},model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})],1),a("td",{staticClass:"text-center",attrs:{width:"30"}},[a("v-text-field",{attrs:{type:"number"},model:{value:e.item.precio,callback:function(a){t.$set(e.item,"precio",a)},expression:"props.item.precio"}})],1),a("td",{staticClass:"text-center"},[a("v-chip",{attrs:{color:"info",dark:""}},[t._v(" "+t._s(e.item.cantidad*e.item.precio)+"€ ")])],1),a("td",{staticClass:"text-center"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v(" delete ")])],1)])]}},{key:"items",fn:function(e){return[a("td",[t._v("$ "+t._s(e.cantidad*t.props_.precio))])]}}],null,!1,1527924899)},[a("template",{slot:"no-data"},[a("h3",[t._v("No hay artículos agregados al detalle.")])])],2),a("v-col",{staticClass:"text-right"},[a("strong",[t._v("Total Parcial:")]),t._v(" € "+t._s(t.totalParcial=(t.total-t.totalImpuesto).toFixed(2))+" ")]),a("v-col",{staticClass:"text-right"},[a("strong",[t._v("Total Impuesto:")]),t._v(" € "+t._s(t.totalImpuesto=(t.total*t.impuesto/(1+t.impuesto)).toFixed(2))+" ")]),a("v-col",{staticClass:"text-right"},[a("strong",[t._v("Total Neto:")]),t._v(" € "+t._s(t.total=t.calcularTotal)+" ")])]],2),a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return a("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),a("v-col",{staticClass:"text-right",attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[a("v-btn",{attrs:{color:"blue darken-1",text:""},nativeOn:{click:function(e){return t.ocultarNuevo()}}},[t._v("Cancelar")]),0==t.verDetalle?a("v-btn",{attrs:{color:"success"},nativeOn:{click:function(e){return t.guardar()}}},[t._v("Guardar")]):t._e()],1)],1)],1):t._e()],1)],1)},Xt=[],Zt={data:function(){return{dialog:!1,search:"",ingresos:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Usuario",value:"usuario.nombre",sortable:!0},{text:"Proveedor",value:"persona.nombre",sortable:!0},{text:"Tipo Comprobante",value:"tipo_comprobante",sortable:!0},{text:"Serie comprobante",value:"serie_comprobante",sortable:!1},{text:"Número comprobante",value:"num_comprobante",sortable:!1},{text:"Fecha",value:"createdAt",sortable:!1},{text:"Impuesto",value:"impuesto",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],_id:"",persona:"",personas:[],tipo_comprobante:"",comprobantes:["FACTURA","TICKET"],serie_comprobante:"",num_comprobante:"",impuesto:.18,codigo:"",cabeceraDetalles:[{text:"Artículo",value:"articulo",sortable:!1,width:"60%",align:"center"},{text:"Cantidad",value:"cantidad",sortable:!1,width:"10%",align:"center"},{text:"Precio",value:"precio",sortable:!1,width:"10%",align:"center"},{text:"Sub Total",value:"subtotal",sortable:!1,width:"10%",align:"center"},{text:"Borrar",value:"borrar",sortable:!1,width:"10%",align:"center"}],detalles:[],verNuevo:0,errorArticulo:null,total:0,totalParcial:0,totalImpuesto:0,articulos:[],texto:"",cabeceraArticulos:[{text:"Código",value:"codigo",sortable:!1},{text:"Nombre",value:"nombre",sortable:!0},{text:"Categoría",value:"categoria.nombre",sortable:!0},{text:"Stock",value:"stock",sortable:!1},{text:"Precio Venta",value:"precio_venta",sortable:!1},{text:"Descripción",value:"descripcion",sortable:!1},{text:"Estado",value:"estado",sortable:!1},{text:"Seleccionar",value:"seleccionar",sortable:!1}],verDetalle:0,valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:""}},computed:{calcularTotal:function(){for(var t=0,e=0;e<this.detalles.length;e++)t+=this.detalles[e].cantidad*this.detalles[e].precio;return t},calcularSubTotal:function(){for(var t=0,e=0;e<this.detalles.length;e++)t+=this.detalles[e].cantidad*this.detalles[e].precio,this.subtotal=t;return t}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar(),this.selectPersona()},methods:{selectPersona:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};U.a.get("persona/listProveedores",o).then((function(a){e=a.data,e.map((function(e){t.personas.push({text:e.nombre,value:e._id})}))})).catch((function(t){console.log(t)}))},buscarCodigo:function(){var t=this;t.errorArticulo=null;var e={Token:this.$store.state.token},a={headers:e};U.a.get("articulo/queryCodigo?codigo="+this.codigo,a).then((function(e){t.agregarDetalle(e.data)})).catch((function(e){t.errorArticulo="No existe el artículo."}))},agregarDetalle:function(t){this.errorArticulo=null,1==this.encuentra(t._id)?this.errorArticulo="El artículo ya ha sido agregado.":(this.detalles.push({_id:t._id,articulo:t.nombre,cantidad:1,precio:t.precio_venta}),this.codigo="")},encuentra:function(t){for(var e=0,a=0;a<this.detalles.length;a++)this.detalles[a]._id==t&&(e=!0);return e},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!=a&&t.splice(a,1)},listarArticulos:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.get("articulo/list?valor="+this.texto,a).then((function(e){t.articulos=e.data})).catch((function(t){console.log(t)}))},mostrarModalArticulos:function(){this.dialog=1},listarDetalles:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};U.a.get("ingreso/query?_id="+t,o).then((function(t){e.detalles=t.data.detalles})).catch((function(t){console.log(t)}))},verIngreso:function(t){this.limpiar(),this.tipo_comprobante=t.tipo_comprobante,this.serie_comprobante=t.serie_comprobante,this.num_comprobante=t.num_comprobante,this.persona=t.persona._id,this.impuesto=t.impuesto,this.listarDetalles(t._id),this.verNuevo=1,this.verDetalle=1},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.get("ingreso/list",a).then((function(e){t.ingresos=e.data})).catch((function(t){console.log(t)}))},limpiar:function(){this._id="",this.tipo_comprobante="",this.serie_comprobante="",this.num_comprobante="",this.impuesto=.18,this.codigo="",this.total=0,this.totalParcial=0,this.totalImpuesto=0,this.detalles=[],this.verNuevo=0,this.valida=0,this.validaMensaje=[],this.verDetalle=0},validar:function(){return this.valida=0,this.validaMensaje=[],this.persona||this.validaMensaje.push("Seleccione un proveedor."),this.tipo_comprobante||this.validaMensaje.push("Seleccione un tipo de comprobante."),this.num_comprobante||this.validaMensaje.push("Ingrese el número del comprobante."),(!this.impuesto||this.impuesto<0||this.impuesto>1)&&this.validaMensaje.push("Ingrese un impuesto válido."),this.detalles.length<=0&&this.validaMensaje.push("Ingrese al menos un artículo al detalle"),this.validaMensaje.length&&(this.valida=1),this.valida},mostrarNuevo:function(){this.verNuevo=1},ocultarNuevo:function(){this.verNuevo=0,this.limpiar()},guardar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};this.validar()||U.a.post("ingreso/add",{persona:this.persona,usuario:this.$store.state.usuario._id,tipo_comprobante:this.tipo_comprobante,serie_comprobante:this.serie_comprobante,num_comprobante:this.num_comprobante,impuesto:this.impuesto,total:this.total,detalles:this.detalles},a).then((function(e){t.limpiar(),t.close(),t.listar()})).catch((function(t){console.log(t)}))},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.num_comprobante,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.put("ingreso/activate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},desactivar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.put("ingreso/deactivate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar()})).catch((function(t){console.log(t)}))},close:function(){this.dialog=!1}}},te=Zt,ee=a("c6a6"),ae=a("cc20"),oe=Object(c["a"])(te,Qt,Xt,!1,null,null,null),ie=oe.exports;d()(oe,{VAutocomplete:ee["a"],VBtn:h["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VChip:ae["a"],VCol:G["a"],VContainer:f["a"],VDataTable:J["a"],VDialog:W["a"],VDivider:g["a"],VFlex:x["a"],VIcon:C["a"],VLayout:y["a"],VSelect:nt["a"],VSpacer:N["a"],VTextField:Q["a"],VToolbar:X["a"],VToolbarTitle:$["a"],VTooltip:E["a"]});var re=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",{attrs:{"align-start":""}},[o("v-flex",[o("v-snackbar",{attrs:{icon:t.icono_notificacion,transition:"scale-transition",value:t.alerta_edit,absolute:"",top:"",right:"",tile:"",color:t.color_notificacion,timeout:3e3,elevation:"24"}},[t._v(t._s(t.mensaje))]),o("v-toolbar",{attrs:{flat:""}},[o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,i=e.attrs;return[o("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",i,!1),a),[o("v-icon",{attrs:{icon:"",large:""},on:{click:function(e){return t.crearpdf()}}},[t._v(" mdi-file-pdf-box ")])],1)]}}])},[o("span",[t._v("Descargar PDF")])]),o("v-toolbar-title",[t._v("Ventas")]),o("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),o("v-spacer"),0==t.verNuevo?o("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}):t._e(),o("v-spacer"),0==t.verNuevo?o("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(e){return t.mostrarNuevo()}}},[t._v("Nuevo")]):t._e(),o("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[t._v("Seleccione un artículo")])]),o("v-card-text",[o("v-container",{attrs:{"grid-list-md":""}},[o("v-layout",{attrs:{wrap:""}},[o("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[o("v-text-field",{staticClass:"text-xs-center",attrs:{"append-icon":"search",label:"Búsqueda"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.listarArticulos()},"click:append":t.listarArticulos},model:{value:t.texto,callback:function(e){t.texto=e},expression:"texto"}}),[o("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraArticulos,items:t.articulos},scopedSlots:t._u([{key:"item.seleccionar",fn:function(e){var a=e.item;return[o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[o("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"green","justify-center":""}},"v-btn",r,!1),i),[o("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.agregarDetalle(a)}}},[t._v(" mdi-plus ")])],1)]}}],null,!0)},[o("span",[t._v("Añadir producto")])])]}},{key:"items",fn:function(e){return[o("td",[t._v(t._s(e.item.codigo))]),o("td",[t._v(t._s(e.item.nombre))]),o("td",[t._v(t._s(e.item.categoria.nombre))]),o("td",[t._v(t._s(e.item.stock))]),o("td",[t._v(t._s(e.item.precio_venta))]),o("td",[t._v(t._s(e.item.descripcion))]),o("td",[e.item.estado?o("div",[o("span",{staticClass:"blue--text"},[t._v("Activo")])]):o("div",[o("span",{staticClass:"red--text"},[t._v("Inactivo")])])])]}}],null,!0)})]],2)],1)],1)],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancelar")])],1)],1)],1),o("v-dialog",{attrs:{"max-width":"290"},model:{value:t.adModal,callback:function(e){t.adModal=e},expression:"adModal"}},[o("v-card",[1==t.adAccion?o("v-card-title",{staticClass:"headline"},[t._v(" Activar Item ")]):t._e(),2==t.adAccion?o("v-card-title",{staticClass:"headline"},[t._v(" Desactivar Item ")]):t._e(),o("v-card-text",[t._v(" Estás a punto de "),1==t.adAccion?o("span",[t._v("activar ")]):t._e(),2==t.adAccion?o("span",[t._v("desactivar ")]):t._e(),t._v(" el item "+t._s(t.adNombre)+" ")]),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"green darken-1",text:"text"},on:{click:function(e){return t.activarDesactivarCerrar()}}},[t._v(" Cancelar ")]),1==t.adAccion?o("v-btn",{attrs:{color:"orange darken-4",text:"text"},on:{click:function(e){return t.activar()}}},[t._v(" Activar ")]):t._e(),2==t.adAccion?o("v-btn",{attrs:{color:"orange darken-4",text:"text"},on:{click:function(e){return t.desactivar()}}},[t._v(" Desactivar ")]):t._e()],1)],1)],1),o("v-dialog",{attrs:{"max-width":"1000px"},model:{value:t.comprobanteModal,callback:function(e){t.comprobanteModal=e},expression:"comprobanteModal"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[o("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(e){return t.crearPDF()}}},[o("v-icon",[t._v("print")])],1),t._v(" Reporte de ventas ")],1),o("v-card-text",[o("div",{attrs:{id:"factura"}},[o("header",[o("div",{attrs:{id:"logo"}},[o("img",{attrs:{src:a("c4f5"),id:"imagen"}})]),o("div",{attrs:{id:"datos"}},[o("p",{attrs:{id:"encabezado"}},[o("b",[t._v("Tienda WEB")]),o("br"),t._v("Calle 8 de mayo, nº 8, San Miguel del pino, Valladolid"),o("br"),t._v("Telefono:(+34) 648645576"),o("br"),t._v("Email:diego.vazquez.gomez@gmail.com ")])]),o("div",{attrs:{id:"fact"}},[o("p",[t._v(" "+t._s(t.tipo_comprobante)),o("br"),t._v(" "+t._s(t.serie_comprobante)+"-"+t._s(t.num_comprobante)),o("br"),t._v(" "+t._s(t.fecha)+" ")])])]),o("br"),o("section",[o("div",[o("table",{attrs:{id:"facliente"}},[o("tbody",[o("tr",[o("td",{attrs:{id:"cliente"}},[t._v(" Sr(a). "),o("strong",[t._v(t._s(t.persona.nombre))]),o("br"),t._v(" Documento: "),o("strong",[t._v(t._s(t.persona.num_documento))]),o("br"),o("strong",[t._v("Dirección:")]),t._v(" "+t._s(t.persona.direccion)),o("br"),o("strong",[t._v("Teléfono:")]),t._v(" "+t._s(t.persona.telefono)),o("br"),o("strong",[t._v("Email:")]),t._v(" "+t._s(t.persona.email)+" ")])])])])])]),o("br"),o("section",[o("div",[o("table",{attrs:{id:"facarticulo"}},[o("thead",[o("tr",{attrs:{id:"fa"}},[o("th",[t._v("CANT")]),o("th",[t._v("DESCRIPCION")]),o("th",[t._v("PRECIO UNIT")]),o("th",[t._v("DESC.")]),o("th",[t._v("PRECIO TOTAL")])])]),o("tbody",t._l(t.detalles,(function(e){return o("tr",{key:e._id},[o("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.cantidad))]),o("td",[t._v(t._s(e.articulo))]),o("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.precio))]),o("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(e.descuento))]),o("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(e.cantidad*e.precio-e.descuento)+" ")])])})),0),o("tfoot",[o("tr",[o("th"),o("th"),o("th"),o("th",{staticStyle:{"text-align":"right"}},[t._v("SUBTOTAL")]),o("th",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(t.totalParcial=(t.total-t.totalImpuesto).toFixed(2))+" € ")])]),o("tr",[o("th"),o("th"),o("th"),o("th",{staticStyle:{"text-align":"right"}},[t._v(" IVA("+t._s(t.impuesto)+"%) ")]),o("th",{staticStyle:{"text-align":"right"}},[t._v(" € "+t._s(t.totalImpuesto=(t.total*t.impuesto/(1+t.impuesto)).toFixed(2))+" ")])]),o("tr",[o("th"),o("th"),o("th"),o("th",{staticStyle:{"text-align":"right"}},[t._v("TOTAL")]),o("th",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(t.total=t.calcularTotal)+" € ")])])])])])]),o("br"),o("br"),o("footer",[o("div",{attrs:{id:"gracias"}},[o("p",[o("b",[t._v("Gracias por su compra!")])])])])])]),o("v-card-actions",[o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return t.ocultarComprobante()}}},[t._v("Cancelar")])],1)],1)],1)],1),0==t.verNuevo?o("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.ventas,search:t.search},scopedSlots:t._u([{key:"item.opciones",fn:function(e){var a=e.item;return[o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[o("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"orange"}},"v-btn",r,!1),i),[o("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.verIngreso(a)}}},[t._v(" mdi-tab ")])],1)]}}],null,!0)},[o("span",[t._v("Ver Venta")])]),o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[o("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"blue"}},"v-btn",r,!1),i),[o("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.mostrarComprobante(a)}}},[t._v(" mdi-printer-outline ")])],1)]}}],null,!0)},[o("span",[t._v("Ver Venta")])]),o("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,r=e.attrs;return[a.estado?[o("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"red"}},"v-btn",r,!1),i),[o("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(2,a)}}},[t._v(" mdi-cancel ")])],1)]:[o("v-btn",t._g(t._b({attrs:{small:"",icon:"",color:"green"}},"v-btn",r,!1),i),[o("v-icon",{attrs:{small:""},on:{click:function(e){return t.activarDesactivarMostrar(1,a)}}},[t._v(" check ")])],1)]]}}],null,!0)},[a.estado?o("span",[t._v("Desactivar Venta")]):o("span",[t._v("Activar Venta")])])]}},{key:"items",fn:function(e){return[o("td",{staticClass:"justify-center layout px-0"},[o("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.verIngreso(e.item)}}},[t._v(" tab ")]),e.item.estado?[o("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(2,e.item)}}},[t._v(" block ")])]:[o("v-icon",{attrs:{small:""},on:{click:function(a){return t.activarDesactivarMostrar(1,e.item)}}},[t._v(" check ")])]],2),o("td",[t._v(t._s(e.item.usuario.nombre))]),o("td",[t._v(t._s(e.item.persona.nombre))]),o("td",[t._v(t._s(e.item.tipo_comprobante))]),o("td",[t._v(t._s(e.item.serie_comprobante))]),o("td",[t._v(t._s(e.item.num_comprobante))]),o("td",[t._v(t._s(e.item.createdAt))]),o("td",[t._v(t._s(e.item.impuesto))]),o("td",[t._v(t._s(e.item.total))]),o("td",[e.item.estado?o("div",[o("span",{staticClass:"blue--text"},[t._v("Aceptado")])]):o("div",[o("span",{staticClass:"red--text"},[t._v("Anulado")])])])]}},{key:"no-data",fn:function(){return[o("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.listar()}}},[t._v("Resetear")])]},proxy:!0}],null,!0)}):t._e(),t.verNuevo?o("v-container",{staticClass:"pa-4 white",attrs:{"grid-list-sm":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[o("v-select",{attrs:{items:t.comprobantes,label:"Tipo Comprobante"},model:{value:t.tipo_comprobante,callback:function(e){t.tipo_comprobante=e},expression:"tipo_comprobante"}})],1),o("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[o("v-text-field",{attrs:{label:"Serie Comprobante"},model:{value:t.serie_comprobante,callback:function(e){t.serie_comprobante=e},expression:"serie_comprobante"}})],1),o("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[o("v-text-field",{attrs:{label:"Número Comprobante"},model:{value:t.num_comprobante,callback:function(e){t.num_comprobante=e},expression:"num_comprobante"}})],1),o("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",xl8:""}},[o("v-autocomplete",{attrs:{items:t.personas,label:"Proveedor"},model:{value:t.persona,callback:function(e){t.persona=e},expression:"persona"}})],1),o("v-flex",{attrs:{xs12:"",sm4:"",md4:"",lg4:"",xl4:""}},[o("v-text-field",{attrs:{label:"Impuesto",type:"number",min:"0",max:"100"},model:{value:t.impuesto,callback:function(e){t.impuesto=e},expression:"impuesto"}})],1),o("v-flex",{attrs:{xs12:"",sm8:"",md8:"",lg8:"",x8:""}},[o("v-text-field",{attrs:{label:"Código"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.buscarCodigo()}},model:{value:t.codigo,callback:function(e){t.codigo=e},expression:"codigo"}})],1),o("v-flex",{attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[o("v-btn",{attrs:{small:"",fab:"",dark:"",color:"teal"},on:{click:function(e){return t.mostrarModalArticulos()}}},[o("v-icon",{attrs:{dark:""}},[t._v("list")])],1)],1),o("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.errorArticulo,expression:"errorArticulo"}],attrs:{xs12:"",sm2:"",md2:"",lg2:"",xl2:""}},[o("div",{staticClass:"red--text",domProps:{textContent:t._s(t.errorArticulo)}})]),o("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[[o("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.cabeceraDetalles,items:t.detalles,"hide-default-footer":""},scopedSlots:t._u([{key:"item",fn:function(e){return[o("tr",[o("td",{staticClass:"text-center"},[t._v(t._s(e.item.articulo))]),o("td",{staticClass:"text-center",attrs:{width:"20"}},[o("v-text-field",{attrs:{type:"number"},model:{value:e.item.cantidad,callback:function(a){t.$set(e.item,"cantidad",a)},expression:"props.item.cantidad"}})],1),o("td",{staticClass:"text-center",attrs:{width:"20"}},[o("v-text-field",{attrs:{type:"number"},model:{value:e.item.precio,callback:function(a){t.$set(e.item,"precio",a)},expression:"props.item.precio"}})],1),o("td",{staticClass:"text-center",attrs:{width:"20"}},[o("v-text-field",{staticClass:"text-center",attrs:{type:"number",min:"0",max:"100"},model:{value:e.item.descuento,callback:function(a){t.$set(e.item,"descuento",a)},expression:"props.item.descuento"}})],1),o("td",{staticClass:"text-center"},[o("v-chip",{attrs:{color:"info",dark:""}},[t._v(" "+t._s(e.item.cantidad*e.item.precio-e.item.descuento)+"€ ")])],1),o("td",{staticClass:"text-center"},[o("v-icon",{staticClass:"mr-2 text-center",attrs:{small:""},on:{click:function(a){return t.eliminarDetalle(t.detalles,e.item)}}},[t._v(" delete ")])],1)])]}}],null,!1,635622525)},[o("template",{slot:"no-data"},[o("h3",[t._v("No hay artículos agregados al detalle.")])])],2),o("v-col",{staticClass:"text-right"},[o("strong",[t._v("Total Parcial:")]),t._v(" € "+t._s(t.totalParcial=(t.total-t.totalImpuesto).toFixed(2))+" ")]),o("v-col",{staticClass:"text-right"},[o("strong",[t._v("Total Impuesto:")]),t._v(" € "+t._s(t.totalImpuesto=(t.total*t.impuesto/(1+t.impuesto)).toFixed(2))+" ")]),o("v-col",{staticClass:"text-right"},[o("strong",[t._v("Total Neto:")]),t._v(" € "+t._s(t.total=t.calcularTotal)+" ")])]],2),o("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.valida,expression:"valida"}],attrs:{xs12:"",sm12:"",md12:""}},t._l(t.validaMensaje,(function(e){return o("div",{key:e,staticClass:"red--text",domProps:{textContent:t._s(e)}})})),0),o("v-col",{staticClass:"text-right",attrs:{xs12:"",sm12:"",md12:"",lg12:"",xl12:""}},[o("v-btn",{attrs:{color:"blue darken-1",text:""},nativeOn:{click:function(e){return t.ocultarNuevo()}}},[t._v("Cancelar")]),0==t.verDetalle?o("v-btn",{attrs:{color:"success"},nativeOn:{click:function(e){return t.guardar()}}},[t._v("Guardar")]):t._e()],1)],1)],1):t._e()],1)],1)},ne=[],se=a("c0e9"),ce=a.n(se),le={data:function(){return{dialog:!1,search:"",ventas:[],headers:[{text:"Opciones",value:"opciones",sortable:!1},{text:"Usuario",value:"usuario.nombre",sortable:!0},{text:"Cliente",value:"persona.nombre",sortable:!0},{text:"Tipo Comprobante",value:"tipo_comprobante",sortable:!0},{text:"Serie comprobante",value:"serie_comprobante",sortable:!1},{text:"Número comprobante",value:"num_comprobante",sortable:!1},{text:"Fecha",value:"createdAt",sortable:!1},{text:"Impuesto",value:"impuesto",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"Estado",value:"estado",sortable:!1}],_id:"",persona:"",personas:[],tipo_comprobante:"",comprobantes:["FACTURA","TICKET"],serie_comprobante:"",num_comprobante:"",impuesto:.21,codigo:"",cabeceraDetalles:[{text:"Artículo",value:"articulo",sortable:!1,width:"50%",align:"center"},{text:"Cantidad",value:"cantidad",sortable:!1,width:"10%",align:"center"},{text:"Precio",value:"precio",sortable:!1,width:"10%",align:"center"},{text:"Descuento",value:"descuento",sortable:!1,width:"10%",align:"center"},{text:"Sub Total",value:"subtotal",sortable:!1,width:"10%",align:"center"},{text:"Borrar",value:"borrar",sortable:!1,width:"10%",align:"center"}],detalles:[],verNuevo:0,errorArticulo:null,total:0,totalParcial:0,totalImpuesto:0,articulos:[],texto:"",cabeceraArticulos:[{text:"Código",value:"codigo",sortable:!1},{text:"Nombre",value:"nombre",sortable:!0},{text:"Categoría",value:"categoria.nombre",sortable:!0},{text:"Stock",value:"stock",sortable:!1},{text:"Precio Venta",value:"precio_venta",sortable:!1},{text:"Descripción",value:"descripcion",sortable:!1},{text:"Estado",value:"estado",sortable:!1},{text:"Seleccionar",value:"seleccionar",sortable:!1}],verDetalle:0,valida:0,validaMensaje:[],adModal:0,adAccion:0,adNombre:"",adId:"",descuento:.1,comprobanteModal:0,fecha:null,color_notificacion:null,mensaje:null,icono_notificacion:null,alerta_edit:!1}},computed:{calcularTotal:function(){for(var t=0,e=0;e<this.detalles.length;e++)t=t+this.detalles[e].cantidad*this.detalles[e].precio-this.detalles[e].descuento;return t}},watch:{dialog:function(t){t||this.close()}},created:function(){this.listar(),this.selectPersona()},methods:{crearPDF:function(){var t=document.getElementById("factura");ce()(t).then((function(t){var e=t.toDataURL("image/png"),a=210,o=295,i=t.height*a/t.width,r=i,n=new ot["default"]("p","mm","a4"),s=0;n.addImage(e,"PNG",0,s,a,i),r-=o;while(r>=0)s=r-i,n.addPage(),n.addImage(e,"PNG",0,s,a,i),r-=o;n.save("ComprobanteVenta.pdf")}))},mostrarComprobante:function(t){console.log(this.personaArray),this.limpiar(),this.tipo_comprobante=t.tipo_comprobante,this.serie_comprobante=t.serie_comprobante,this.num_comprobante=t.num_comprobante,this.fecha=t.createdAt,this.persona=t.persona,this.impuesto=t.impuesto,this.listarDetalles(t._id),this.comprobanteModal=1},ocultarComprobante:function(){this.comprobanteModal=0},selectPersona:function(){var t=this,e=[],a={Token:this.$store.state.token},o={headers:a};U.a.get("persona/listClientes",o).then((function(a){e=a.data,e.map((function(e){t.personas.push({text:e.nombre,value:e._id})}))})).catch((function(t){console.log(t)}))},buscarCodigo:function(){var t=this;t.errorArticulo=null;var e={Token:this.$store.state.token},a={headers:e};U.a.get("articulo/queryCodigo?codigo="+this.codigo,a).then((function(e){t.agregarDetalle(e.data),t.alerta_edit=!0,t.mensaje="Articulo Añadido",t.icono_notificacion="mdi-check",t.color_notificacion="green"})).catch((function(e){t.errorArticulo="No existe el artículo.",t.alerta_edit=!0,t.mensaje="No existe el artículo.",t.icono_notificacion="mdi-alert",t.color_notificacion="red"})),t.alerta_edit=!1,t.mensaje="",t.icono_notificacion="",t.color_notificacion=""},agregarDetalle:function(t){this.errorArticulo=null,1==this.encuentra(t._id)?(this.errorArticulo="El artículo ya ha sido agregado.",this.alerta_edit=!0,this.mensaje="El artículo ya ha sido agregado.",this.icono_notificacion="mdi-alert",this.color_notificacion="orange"):(this.detalles.push({_id:t._id,articulo:t.nombre,cantidad:1,precio:t.precio_venta,descuento:0}),this.codigo=""),this.alerta_edit=!1,this.mensaje="",this.icono_notificacion="",this.color_notificacion=""},encuentra:function(t){for(var e=0,a=0;a<this.detalles.length;a++)this.detalles[a]._id==t&&(e=!0);return e},eliminarDetalle:function(t,e){var a=t.indexOf(e);-1!=a&&t.splice(a,1)},listarArticulos:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.get("articulo/list?valor="+this.texto,a).then((function(e){t.articulos=e.data})).catch((function(t){console.log(t)}))},mostrarModalArticulos:function(){this.dialog=1},listarDetalles:function(t){var e=this,a={Token:this.$store.state.token},o={headers:a};U.a.get("venta/query?_id="+t,o).then((function(t){e.detalles=t.data.detalles})).catch((function(t){console.log(t)}))},verIngreso:function(t){this.limpiar(),this.tipo_comprobante=t.tipo_comprobante,this.serie_comprobante=t.serie_comprobante,this.num_comprobante=t.num_comprobante,this.persona=t.persona._id,this.impuesto=t.impuesto,this.listarDetalles(t._id),this.verNuevo=1,this.verDetalle=1},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.get("venta/list",a).then((function(e){t.ventas=e.data})).catch((function(t){console.log(t)}))},limpiar:function(){this._id="",this.tipo_comprobante="",this.serie_comprobante="",this.num_comprobante="",this.impuesto=.18,this.codigo="",this.total=0,this.totalParcial=0,this.totalImpuesto=0,this.detalles=[],this.verNuevo=0,this.valida=0,this.validaMensaje=[],this.verDetalle=0},validar:function(){return this.valida=0,this.validaMensaje=[],this.persona||this.validaMensaje.push("Seleccione un proveedor."),this.tipo_comprobante||this.validaMensaje.push("Seleccione un tipo de comprobante."),this.num_comprobante||this.validaMensaje.push("Ingrese el número del comprobante."),(!this.impuesto||this.impuesto<0||this.impuesto>1)&&this.validaMensaje.push("Ingrese un impuesto válido."),(!this.descuento||this.descuento<0)&&this.validaMensaje.push("Ingrese un descuento válido."),this.detalles.length<=0&&this.validaMensaje.push("Ingrese al menos un artículo al detalle"),this.validaMensaje.length&&(this.valida=1),this.valida},mostrarNuevo:function(){this.verNuevo=1},ocultarNuevo:function(){this.verNuevo=0,this.limpiar()},guardar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};this.validar()||(U.a.post("venta/add",{persona:this.persona,usuario:this.$store.state.usuario._id,tipo_comprobante:this.tipo_comprobante,serie_comprobante:this.serie_comprobante,num_comprobante:this.num_comprobante,impuesto:this.impuesto,total:this.total,detalles:this.detalles},a).then((function(e){t.limpiar(),t.close(),t.listar(),t.alerta_edit=!0,t.mensaje="Venta realizada",t.icono_notificacion="mdi-alert",t.color_notificacion="green"})).catch((function(e){console.log(e),t.alerta_edit=!0,t.mensaje="Error al realizar la venta",t.icono_notificacion="mdi-alert",t.color_notificacion="red"})),t.alerta_edit=!1,t.mensaje="",t.icono_notificacion="",t.color_notificacion="")},activarDesactivarMostrar:function(t,e){this.adModal=1,this.adNombre=e.num_comprobante,this.adId=e._id,1==t?this.adAccion=1:2==t?this.adAccion=2:this.adModal=0},activarDesactivarCerrar:function(){this.adModal=0},activar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.put("venta/activate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar(),t.alerta_edit=!0,t.mensaje="Venta activada correctamente",t.icono_notificacion="mdi-alert",t.color_notificacion="green"})).catch((function(e){console.log(e),t.alerta_edit=!0,t.mensaje="Error al activar la venta",t.icono_notificacion="mdi-alert",t.color_notificacion="red"})),t.alerta_edit=!1,t.mensaje="",t.icono_notificacion="",t.color_notificacion=""},desactivar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.put("venta/deactivate",{_id:this.adId},a).then((function(e){t.adModal=0,t.adAccion=0,t.adNombre="",t.adId="",t.listar(),t.alerta_edit=!0,t.mensaje="Venta desactivada correctamente",t.icono_notificacion="mdi-alert",t.color_notificacion="green"})).catch((function(e){console.log(e),t.alerta_edit=!0,t.mensaje="Error al desactivar la venta",t.icono_notificacion="mdi-alert",t.color_notificacion="red"})),t.alerta_edit=!1,t.mensaje="",t.icono_notificacion="",t.color_notificacion=""},close:function(){this.dialog=!1}}},de=le,ue=(a("02d6"),Object(c["a"])(de,re,ne,!1,null,null,null)),ve=ue.exports;d()(ue,{VAutocomplete:ee["a"],VBtn:h["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VChip:ae["a"],VCol:G["a"],VContainer:f["a"],VDataTable:J["a"],VDialog:W["a"],VDivider:g["a"],VFlex:x["a"],VIcon:C["a"],VLayout:y["a"],VSelect:nt["a"],VSnackbar:Y["a"],VSpacer:N["a"],VTextField:Q["a"],VToolbar:X["a"],VToolbarTitle:$["a"],VTooltip:E["a"]});var me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"grid-list-m":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-col",{attrs:{xs12:"",sm12:"",md12:""}},[a("div",{staticClass:"ct-chart"},[a("canvas",{attrs:{id:"myChart"}})])])],1)],1)},pe=[],he=a("d549"),_e={data:function(){return{valores:[],meses:[],totales:[]}},methods:{listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.get("venta/grafico12meses",a).then((function(e){t.valores=e.data,t.graficar()})).catch((function(t){console.log(t)}))},graficar:function(){var t=this,e="";t.valores.map((function(a){switch(parseInt(a._id.mes)){case 1:e="Enero";break;case 2:e="Febrero";break;case 3:e="Marzo";break;case 4:e="Abril";break;case 5:e="Mayo";break;case 6:e="Junio";break;case 7:e="Julio";break;case 8:e="Agosto";break;case 9:e="Setiembre";break;case 10:e="Octubre";break;case 11:e="Noviembre";break;case 12:e="Diciembre";break;default:e="error"}t.meses.push(e+"-"+a._id.year),t.totales.push(a.total)}));var a=document.getElementById("myChart");new he["a"](a,{type:"bar",data:{labels:t.meses,datasets:[{label:"Ventas de los últimos 12 meses",data:t.totales,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Ventas"}}}})}},mounted:function(){this.listar()}},be=_e,fe=Object(c["a"])(be,me,pe,!1,null,null,null),ge=fe.exports;d()(fe,{VCol:G["a"],VContainer:f["a"],VLayout:y["a"]});var xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{"align-center":""}},[a("v-container",{attrs:{fluid:""}},[a("v-stepper",{attrs:{vertical:""},model:{value:t.e6,callback:function(e){t.e6=e},expression:"e6"}},[a("v-stepper-step",{attrs:{complete:t.e6>1,step:"1"}},[t._v(" Carrito "),a("small")]),a("v-stepper-content",{attrs:{step:"1"}},[a("v-card",{staticClass:"mb-12",attrs:{color:"grey lighten-1",height:"200px"}}),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.e6=2}}},[t._v(" Continuar ")]),a("v-btn",{attrs:{text:"",to:{name:"tienda"}}},[t._v(" Cancelar ")])],1),a("v-stepper-step",{attrs:{complete:t.e6>2,step:"2"}},[t._v(" Direccion de envio ")]),a("v-stepper-content",{attrs:{step:"2"}},[a("v-card",{staticClass:"mb-12",attrs:{color:"grey lighten-1",height:"200px"}}),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.e6=3}}},[t._v(" Continuar ")]),a("v-btn",{attrs:{text:""},on:{click:t.retroceder}},[t._v(" Cancelar ")])],1),a("v-stepper-step",{attrs:{complete:t.e6>3,step:"3"}},[t._v(" Seleccionar modo de pago ")]),a("v-stepper-content",{attrs:{step:"3"}},[a("v-card",{staticClass:"mb-12",attrs:{color:"grey lighten-1",height:"200px"}}),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.e6=4}}},[t._v(" Continuar ")]),a("v-btn",{attrs:{text:""},on:{click:t.retroceder}},[t._v(" Cancelar ")])],1),a("v-stepper-step",{attrs:{step:"4"}},[t._v(" Confirmar compra ")]),a("v-stepper-content",{attrs:{step:"4"}},[a("v-card",{staticClass:"mb-12",attrs:{color:"grey lighten-1",height:"200px"}}),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.e6=1}}},[t._v(" Continuar ")]),a("v-btn",{attrs:{text:""},on:{click:t.retroceder}},[t._v(" Cancelar ")])],1)],1)],1)],1)},ke=[],Ce={data:function(){return{nombre:null,_id:"",imagen:null,articulos:[],loading:!1,descripcion:null,precio_venta:null,stock:null,itemsPerPage:4,search:"",e6:1}},created:function(){this.listar()},methods:{retroceder:function(){console.log(this.e6),this.e6=this.e6-1},listar:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};U.a.get("articulo/list",a).then((function(e){t.articulos=e.data,t.loading=!1,console.log(t.articulos),t.articulos.map((function(e){t.nombre=e.nombre,t.imagen=e.imagen,t.descripcion=e.descripcion,t.precio=e.precio_venta,t.stock=e.stock}))})).catch((function(t){console.log(t)}))},devolucion:function(t){var e=this,a={Token:this.$store.state.token};console.log(this._id);var o={headers:a};U.a.put("articulo/comprar",{_id:t},o).then((function(t){e.adModal=0,e.adAccion=0,e.adNombre="",e.adId="",e.listar(),e.alerta_edit=!0,e.mensaje="Articulo Comprado"})).catch((function(t){console.log(t)})),e.alerta_edit=!1,e.mensaje=null}}},ye=Ce,Ve=a("7e85"),Ae=a("e516"),Ie=a("56a4"),Te=Object(c["a"])(ye,xe,ke,!1,null,null,null),De=Te.exports;d()(Te,{VBtn:h["a"],VCard:_["a"],VContainer:f["a"],VLayout:y["a"],VStepper:Ve["a"],VStepperContent:Ae["a"],VStepperStep:Ie["a"]});var je=a("2f62"),we=a("1232");o["a"].use(je["a"]);var Me=new je["a"].Store({state:{token:null,usuario:null},mutations:{setToken:function(t,e){t.token=e},setUsuario:function(t,e){t.usuario=e}},actions:{guardarToken:function(t,e){var a=t.commit;a("setToken",e),a("setUsuario",Object(we["a"])(e)),localStorage.setItem("token",e)},autoLogin:function(t){var e=t.commit,a=localStorage.getItem("token");a&&(e("setToken",a),e("setUsuario",Object(we["a"])(a))),Ne.push({name:"home"}).catch((function(){}))},salir:function(t){var e=t.commit;e("setToken",null),e("setUsuario",null),localStorage.removeItem("token"),Ne.push({name:"login"}).catch((function(){}))}},modules:{}});o["a"].use(L["a"]);var Se=new L["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:ht,meta:{administrador:!0,almacenero:!0,vendedor:!0}},{path:"/login",name:"login",component:Ct,meta:{libre:!0}},{path:"/categoria",name:"categoria",component:tt,meta:{administrador:!0,almacenero:!0}},{path:"/articulo",name:"articulo",component:ct,meta:{administrador:!0,vendedor:!0}},{path:"/tienda",name:"tienda",component:St,meta:{administrador:!0,vendedor:!0}},{path:"/usuario",name:"usuario",component:Ft,meta:{administrador:!0}},{path:"/cliente",name:"cliente",component:zt,meta:{administrador:!0,vendedor:!0}},{path:"/proveedor",name:"proveedor",component:Yt,meta:{administrador:!0,vendedor:!0}},{path:"/ingreso",name:"ingreso",component:ie,meta:{administrador:!0,vendedor:!0}},{path:"/venta",name:"venta",component:ve,meta:{administrador:!0,vendedor:!0}},{path:"/checkout",name:"checkout",component:De,meta:{administrador:!0,vendedor:!0}},{path:"/grafico_v",name:"grafico_v",component:ge,meta:{administrador:!0,vendedor:!0}}]});Se.beforeEach((function(t,e,a){t.matched.some((function(t){return t.meta.libre}))?a():Me.state.usuario&&"Administrador"==Me.state.usuario.rol?t.matched.some((function(t){return t.meta.administrador}))&&a():Me.state.usuario&&"Vendedor"==Me.state.usuario.rol?t.matched.some((function(t){return t.meta.vendedor}))&&a():Me.state.usuario&&"Almacenero"==Me.state.usuario.rol?t.matched.some((function(t){return t.meta.almacenero}))&&a():a({name:"login"})}));var Ne=Se,Pe=a("f309"),$e=a("5e4e");o["a"].use(Pe["a"]);var Ee=new Pe["a"]({theme:{dark:!0,options:{customProperties:!0},themes:{light:{primary:"#320c51",secondary:"#424242",accent:"#642EFE",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},dark:{primary:"#7d6b93",secondary:"#424242",accent:"#642EFE",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}},lang:{locales:{es:$e["a"]},current:"es"},icons:{iconfont:"md"}});a("5363");o["a"].config.productionTip=!1,U.a.defaults.baseURL="http://localhost:3000/api/",new o["a"]({router:Ne,store:Me,vuetify:Ee,icons:{iconfont:"mdi"},render:function(t){return t(F)}}).$mount("#app")},"58de":function(t,e,a){},b260:function(t,e,a){},b926:function(t,e,a){"use strict";a("58de")},c4f5:function(t,e,a){t.exports=a.p+"img/Logo.ce2bd5dc.png"}});
//# sourceMappingURL=app.0180d05d.js.map